# 微信公众号图文自动化发送工具功能设计文档

## 1. 引言
### 1.1 目的
本文档旨在详细描述微信公众号图文自动化发送工具的功能设计，以便开发团队理解和实现。

### 1.2 范围
本工具适用于微信公众号运营者，用于自动化生成和发布图文内容。

### 1.3 定义、缩写和术语
- **AI网站**：提供人工智能服务的网站，如Kimi、可灵AI。
- **素材录入**：将语录或图片素材输入到工具中的过程。

## 2. 总体描述
### 2.1 产品视角
本工具是一个web应用程序，前后端分离，前端采用vite+Vue3+Element Plus，后端采用Fastapi。

### 2.2 产品功能
- 语录素材录入
- 图片素材录入
- 公众号图片发布

### 2.3 用户特征
- 微信公众号运营者
- 需要自动化内容发布的用户

### 2.4 约束
- 需要网络连接以访问AI网站
- 需要微信公众号运营权限

## 3. 具体功能需求
### 3.1 语录素材录入
#### 3.1.1 自行整理录入
- 用户可以导入TXT文件。
- 支持的文件格式：TXT。

#### 3.1.2 自动化操作录入
- 用户输入提示词和���成数量。
- 程序获取Kimi回答并解析录入。
- 初次使用需用户手动登录，程序缓存登录状态。

### 3.2 图片素材录入
#### 3.2.1 自行整理录入
- 用户可以批量导入图片。
- 支持的图片格式：JPG, PNG。

#### 3.2.2 自动化操作录入
- 用户输入图片主题内容。
- 选择是否由AI生成绘画提示词。
- 程序根据提示词操作可灵AI绘图并录入。

### 3.3 公众号图片发布
#### 3.3.1 登录微信公众号
- 前端浏览器登录。
- 用户扫码登录。

#### 3.3.2 随机抽取语录作为标题
- 从素材库中随机选择语录。

#### 3.3.3 随机选择语录与图片
- 随机选择5-8条语录和5-8张图片。
- 将语录合并到图片的上部、下部或中部。

#### 3.3.4 自动发送图文
- 自动发送图文到微信公众号。
- 识别图片中的文字。

### 3.4 每日单词功能
#### 3.4.1 单词展示系统
- 支持 CET4 和 CET6 词库管理
  - 本地词库存储
  - 词库分类管理
  - 单词去重处理
- 单词数据结构
  - 英文单词
  - 音标
  - 中文释义
  - 音频URL

#### 3.4.2 动画效果
- 卡片动画系统
  - 随机位置生成
  - 旋转效果（±5度）
  - 淡入淡出过渡
  - 重叠检测（30%阈值）
  - 自动移除重叠卡片
- 进度条动画
  - iOS风格设计
  - 实时进度更新
  - 打字机文字效果
- 时间控制
  - 总动画时长：13秒
  - 卡片生成间隔：500ms
  - 文字动画间隔：1000ms

#### 3.4.3 音频系统
- 发音播放控制
  - 波浪式频率变化（400ms-800ms）
  - 音频播放速率：1.25倍速
  - 波浪周期：2000ms
  - 自动等待播放完成
- 音频与卡片同步
  - 播放时添加卡片
  - 避免音频重叠
  - 错误处理机制

#### 3.4.4 界面设计
- 主体布局
  - 消息提示框
  - 单词展示区域（320px宽）
  - 进度条区域
  - 操作按钮区
- 卡片布局
  - 最小宽度：100px
  - 固定高度：70px
  - 边缘溢出：-10px
- 视觉风格
  - 深色背景主题
  - 半透明卡片效果
  - 磨砂玻璃质感
  - 现代简约按钮

#### 3.4.5 性能优化
- 动画性能
  - 使用 requestAnimationFrame
  - CSS transform 动画
  - 避免频繁 DOM 操作
- 内存管理
  - 及时移除冗余卡片
  - 优化重叠检测算法
  - 资源释放机制

#### 3.4.6 扩展功能
- 词库管理
  - 支持导入新词库
  - 词库分类标记
  - 学习进度记录
- 自定义设置
  - 动画时长调整
  - 音频参数设置
  - 界面布局适配

## 4. 界面设计
### 4.1 用户界面
- 语录素材录入界面
- 图片素材录入界面
- 公众号发布界面
- 每日单词

### 4.2 交互设计
- 用户操作流程
- 错误处理和用户提示

## 5. 技术要求
### 5.1 系统架构
- 跨平台桌面应用架构

### 5.2 技术栈
- 编程语言：Python
- 框架：Fastapi
- AI服务接口：Kimi API, 可灵AI API

### 5.3 数据存储
- 本地数据库：SQLite

## 6. 测试计划
### 6.1 测试策略
- 单元测试
- 集成测试
- 系统测试

### 6.2 测试用例
- 语录素材录入测试
- 图片素材录入测试
- 公众号发布测试
